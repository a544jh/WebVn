* SpanVisibility takes line breaks into account.

* Css style seems to have best performance, but behavior on windows chrome was inconsistent. requestAnimationFrame does not work.